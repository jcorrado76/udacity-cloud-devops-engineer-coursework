In this repo, we're going to create an EC2 instance in our cloud from the CircleCI instance,
and then we're going to set up that EC2 instance using Ansible from our CircleCI instance. 

You're going to need to take the SSH key that you spin up your EC2 instance with, and copy it into your CircleCI
GUI.

## Adding an SSH Key to CircleCI
Since CircleCI cannot decrypt SSH keys, you must make sure that every key you use in CircleCI has an empty passphrase.

1. Generate the key:
```bash
ssh-keygen -t ed25519 -C "[yourEmail]"
```
The `-t` flag tells `ssh-keygen` what type of key to generate:
* dsa - unsafe and not supported in OpenSSH after version 7
* ecdsa - it depends on your machine pseudo-random number generator
* **ed25519** - the most recommended public-key algorithm available today
* rsa - if you're less than 3072 bit, it's unsafe

By default, it will generate an RSA key.
RSA is hte most widely used public key algorithm for SSH, but it's slower than ED25519, and considered unsafe if you generate an RSA 
smaller than 2048 bits.

However, you're going to be using the `.pem` file generated by AWS, since we're trying to SSH into an EC2 instance.
So, you won't run that above `ssh-keygen` command, since you should already have that `.pem` file.
The `.pem` file contains an RSA PRIVATE KEY.

2. Go to Project Settings
3. Go to SSH Keys
4. Go to Additional SSH Keys
5. Hit Add SSH Key
6. In the Hostname - put the hostname; if left empty, will be used for all hosts
7. In Private Key field, paste the SSH key you're adding
You paste the whole private key into the body here, including the BEGIN PRIVATE KEY and END PRIVATE KEY lines.  
8. Click Add SSH Key

To add SSH keys to your CircleCI jobs, you use the `add_ssh_keys` special step:
```yml
version: 2
jobs:
  deploy-job:
    steps:
      - add_ssh_keys:
          fingerprints:
            - "SO:ME:FIN:G:ER:PR:IN:T"
```

Also note that, in order to avoid the hanging on verifying the authenticity of the host step, we needed to add
an `ansible.cfg` file, setting the default behavior to not check the key of the host.

In addition, note that we ask our CircleCI server to wait for our CloudFormation `create-stack` command to finish before
generating the inventory file and moving onto the Ansible section so that we don't have any connection issues.

Note that when you run the `checkout` command in your CircleCI job, the objects in the root directory
of your git repo will be present in the working directory of your CircleCI workspace. 